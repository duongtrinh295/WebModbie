<div class="m-10 rounded-md p-3">
    <h1 class="text-2xl font-semibold">Role Management</h1>
    <hr class="my-3"> 
 

    <form class="grid grid-cols-6 gap-4" [formGroup]="roleForm" (ngSubmit)="createRole()">

      <div class="flex w-full col-start-1 col-end-4">
        <div >
          <div class="my-3">
            <h1 class="font-medium">Create Role</h1>
            <mat-form-field class="w-full mt-3">
              <mat-label>Role Name</mat-label>
              <input matInput formControlName="nameRole" placeholder="Role Name">
              
            </mat-form-field>
            <span class="text-base text-red-500">{{ errorMessage }}</span>
            <button type="submit" [disabled]="roleForm.invalid" class="bg-purple-600 px-4 disabled:bg-purple-400 rounded-md text-white py-2 m-2">Add</button>
          </div>
        </div>
      </div>

      <div class="w-1/2 col-start-4 col-end-8">
        <div class="my-3">
          <h1 class="font-medium">Assign Role To User</h1>
          <div class="flex gap-5">

            <!-- Select user -->
            <mat-form-field class="mt-3">
              <mat-label>User</mat-label>

              <mat-select [(value)]="selectedUser" >
                @for (user of users$ | async; track user.userId) {
                  <mat-option [value]="user.userId">
                    {{user.userName}}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>

            <!-- select role -->
            <mat-form-field class="mt-3">
              <mat-label>Role</mat-label>
              <mat-select [(value)]="selectedRole">
                @for (role of roles$ | async; track role.roleId) {
                  <mat-option [value]="role.roleId">
                    {{role.nameRole}}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>
            
          </div>

          <!-- buuton assign -->
          <button [disabled]="!selectedUser || !selectedRole" class="bg-purple-600 disabled:bg-blue-300 text-white rounded-md
            px-2 py-4 "
            (click)="assignRole()">
            Assign
          </button>
        </div>       
      </div>

    <!-- Danh sÃ¡ch roles -->

      
    </form>

    <div class="p-5 my-3">
        <h1 class="font-medium">List Role</h1>
        <table class="text-left w-full border">
          <thead>
            <tr class="px-5">
              <th class="border p-2">ID</th>
              <th class="border p-2">Name</th>
              <th class="border p-2">Email</th>
              <th class="border p-2">Role Name</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let role of roleUser$ | async; index as i; trackBy: trackByRoleId" class="border-b">
              <td class="border p-3">{{ i + 1 }}</td>
              <td class="border p-3">{{ role.user.userName}}</td>
              <td class="border p-3">{{ role.user.email }}</td>
              <td class="border p-3">{{ role.role.nameRole }}</td>
              <td class="border p-3 flex items-center gap-5">
                <div>
                  <mat-icon class="cursor-pointer text-red-600">delete</mat-icon>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      

    <!-- Assign Role to User Form -->

  </div>
  